(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{288:function(e,t,s){"use strict";s.r(t);var a=s(0),r=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"deploying-windows-workers-behind-a-proxy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deploying-windows-workers-behind-a-proxy","aria-hidden":"true"}},[e._v("#")]),e._v(" Deploying Windows workers behind a proxy")]),e._v(" "),s("h2",{attrs:{id:"configuring-the-winrm-remoting-script"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configuring-the-winrm-remoting-script","aria-hidden":"true"}},[e._v("#")]),e._v(" Configuring the "),s("code",[e._v("winrm")]),e._v(" remoting script")]),e._v(" "),s("p",[e._v("The playbooks for deploying Windows workers rely on a Powershell script for remote access from the Ansible machine. The script "),s("code",[e._v("ConfigureRemotingForAnsible.ps1")]),e._v(" is available online on GitHub and you can configure the playbooks to use the script directly as follows:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("windows_winrm_script: 'https://raw.githubusercontent.com/ansible/ansible/devel/examples/scripts/ConfigureRemotingForAnsible.ps1'\n")])])]),s("p",[e._v("However, if the deployment is running behind a proxy, you may need to make this script available locally.")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("Download the script:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("wget https://raw.githubusercontent.com/ansible/ansible/devel/examples/scripts/ConfigureRemotingForAnsible.ps1\n\n")])])])]),e._v(" "),s("li",[s("p",[e._v("Deploy a local HTTP server, enabling port 80, for example:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("yum install httpd\nsystemctl enable httpd\nsystemctl start httpd\nfirewall-cmd --permanent --add-port 80/tcp --zone=pubpic\nfirewall-cmd --reload\n\n")])])])]),e._v(" "),s("li",[s("p",[e._v("Copy the downloaded script to the web server:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("cp ConfigureRemotingForAnsible.ps1 /var/www/html\n\n")])])])]),e._v(" "),s("li",[s("p",[e._v("Configure the variable to point at the local web server, for example,")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("windows_winrm_script: 'http://10.10.174.230/ConfigureRemotingForAnsible.ps1'\n")])])])])])])}],!1,null,null,null);r.options.__file="windows-proxy.md";t.default=r.exports}}]);